<% submit_label = local_assigns.fetch(:submit_label, "Save category") %>
<% cancel_path = local_assigns[:cancel_path] %>

<%= form_with(model: coverage_category, local: true, builder: TailwindFormBuilder, html: { class: "space-y-8" }) do |form| %>
  <% if coverage_category.errors.any? %>
    <div class="rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700 shadow-xs dark:border-red-500/30 dark:bg-red-500/10 dark:text-red-200">
      <div class="space-y-2">
        <p class="font-semibold">We couldn't save this coverage category</p>
        <p>Please review the following:</p>
        <ul class="list-disc space-y-1 pl-5">
          <% coverage_category.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <div class="space-y-6">
    <div>
      <%= form.label :name %>
      <div class="mt-2">
        <%= form.text_field :name, placeholder: "e.g. Inpatient services" %>
      </div>
      <% if coverage_category.errors[:name].present? %>
        <p class="mt-2 text-sm text-red-600 dark:text-red-400"><%= coverage_category.errors[:name].to_sentence %></p>
      <% end %>
    </div>

    <div>
      <%= form.label :position %>
      <div class="mt-2">
        <%= form.number_field :position, placeholder: "e.g. 1", min: 0 %>
      </div>
      <% if coverage_category.errors[:position].present? %>
        <p class="mt-2 text-sm text-red-600 dark:text-red-400"><%= coverage_category.errors[:position].to_sentence %></p>
      <% end %>
    </div>
  </div>

  <div class="flex flex-col gap-3 border-t border-gray-200 pt-6 sm:flex-row sm:items-center sm:justify-end dark:border-white/10">
    <% if cancel_path.present? %>
      <%= link_to "Cancel", cancel_path, class: "text-sm font-semibold text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" %>
    <% end %>
    <%= form.submit submit_label %>
  </div>
<% end %>
